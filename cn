# client.py
import socket

client = socket.socket()
client.connect(('127.0.0.1', 5000))

client.send("Hello Server!".encode())
data = client.recv(1024).decode()

print("Server says:", data)
client.close()

# server.py
import socket

server = socket.socket()
server.bind(('127.0.0.1', 5000))
server.listen(1)

print("Server waiting for connection...")

conn, addr = server.accept()
print("Connected with:", addr)

data = conn.recv(1024).decode()
print("Client says:", data)

conn.send("Hello from Server!".encode())
conn.close()  


#include <stdio.h>

int main() {
    int bucket_size, out_rate, n, packet;

    printf("Enter bucket size: ");
    scanf("%d", &bucket_size);

    printf("Enter output rate: ");
    scanf("%d", &out_rate);

    printf("Enter number of incoming packets: ");
    scanf("%d", &n);

    int stored = 0;

    for(int i = 1; i <= n; i++) {
        printf("Enter size of packet %d: ", i);
        scanf("%d", &packet);

        if(packet + stored > bucket_size) {
            printf("Packet %d dropped\n", i);
        } else {
            stored += packet;
            printf("Packet %d accepted\n", i);
        }

        // leaking
        if(stored > out_rate)
            stored -= out_rate;
        else
            stored = 0;

        printf("Bucket contains %d units now\n", stored);
    }

    return 0;
}

  
